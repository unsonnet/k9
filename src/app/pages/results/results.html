<div class="results-page">
  <div class="results-page__thresholds">
    <app-results-reference [reference]="target()" />

    <div class="results-page__thresholds-scroll">
      <app-results-thresholds (applyFilter)="handleApply($event)" />
    </div>
  </div>

  <div class="results-page__grid">
    <div class="results-page__grid-header">
      <div class="results-page__header-text">
        Total: {{ sortedProducts.length }}
      </div>
      <div class="results-page__header-text">
        <label for="sort-select">Order by:</label>
        <select
          [ngModel]="orderBy()"
          (ngModelChange)="orderBy.set($event)"
          id="sort-select"
        >
          <option value="score">Score</option>
          <option value="name">Name</option>
          <option value="starred">Starred</option>
        </select>
      </div>
    </div>

    <div class="results-page__grid-scroll">
      <app-results-grid
        [products]="sortedProducts"
        (productClicked)="openProduct($event)"
      />
    </div>
  </div>

  @if (activeProduct()) {
  <div class="results-page__overlay" (click)="closeOverlay()">
    <div class="results-page__overlay-content" (click)="$event.stopPropagation()">
      <app-product [product]="activeProduct()!" [reference]="target()" />
    </div>
  </div>
  }
</div>
